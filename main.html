<html>
	<head>
	</head>

	<body>

		<canvas id="myCanvas" width="300" height="300" style="border:1px solid #000000;">
			You need to get a better browser buddy.
		</canvas>

		<script type="text/javascript">
			var width = 50;
			var height = 50;
			
			var pos = new Vector2 ( 20, 20 );
			

			var c = document.getElementById("myCanvas");
			var ctx = c.getContext("2d");
			var rect = c.getBoundingClientRect();

			var lastDownTarget;
			window.onload = function() 
			{

			    document.addEventListener('mousedown', function(event) 
			    {
			        lastDownTarget = event.target;

			        var x = event.pageX - rect.left;
			        var y = event.pageY - rect.top;

			        testSquare2.Position = new Vector2 ( x, y );

			    }, false);

			    document.addEventListener('keydown', KeyHandler, false);
			}

			function KeyHandler ( event )
			{
				if(lastDownTarget == c) 
		        {
		        	if ( event.which == 37 )
		        	{
		        		testSquare.Position.X -= 1;
		        	}
		        	else if ( event.which == 39 )
		        	{
		        		testSquare.Position.X += 1;
		        	}
		        	if ( event.which == 38 )
		        	{
		        		testSquare.Position.Y -= 1;
		        	}
		        	else if ( event.which == 40 )
		        	{
		        		testSquare.Position.Y += 1;
		        	}
		        }
			}

    		function Vector2 ( x, y )
     		{
       			this.X = x;
       			this.Y = y;
     		}
     
     		function Square ( pos, size, colour )
     		{
       			this.Velocity = new Vector2 (0, 0);
     
       			this.Position = pos;
       			this.Size = size;
       			this.Colour = colour;
       			
       			this.Ammo = new Array ( );

       			this.Update = function ( )
		     	{
			       	this.Position.X += this.Velocity.X;
		        	this.Position.Y += this.Velocity.Y;
		        
		        	if ( this.Position.X > c.width )
					{
						this.Position.X = -50;
					}
					
					}
 			}
	     
	    	var testSquare = new Square ( new Vector2 ( 20, 20 ), new Vector2 ( 20, 20 ), "#FF0000" );

	     	var testSquare2 = new Square ( new Vector2 ( 200, 20 ), new Vector2 ( 20, 20 ), "#00FF00" );

			setInterval ( onTimerTick, 33 );

			function onTimerTick ( )
			{
				Update ( );
				Render ( );
			}

			function Update ( )
			{
				testSquare.Update ( );
				testSquare2.Update ( );

				
			}

			function Render ( )
			{
				ctx.save ( );

				ctx.setTransform ( 1, 0, 0, 1, 0, 0 );
				ctx.clearRect ( 0, 0, c.width, c.height );

				ctx.restore ( );

				
      			RenderSquare ( testSquare );
      			RenderSquare ( testSquare2 );
				     

			}
			
			function RenderSquare ( square )
			{
			  ctx.fillStyle = square.Colour;
			  ctx.fillRect ( square.Position.X, square.Position.Y,
				                square.Size.X, square.Size.Y );
				           
			}



		</script>

	</body>

</html>